<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Start Pyxel Game</title>
  <script>
    let popupWindow;

    // ボタンがクリックされたときにポップアップを開き、その後URLを変更
    function openPopupAndLoadPage() {
      // まずポップアップウィンドウを開く
      popupWindow = window.open('about:blank', 'popup', 'width=600,height=400');

      // ポップアップが開いたら、URLを指定したページに変更
      setTimeout(function() {
        if (popupWindow) {
          popupWindow.location.href = 'https://rsakamoto.pythonanywhere.com'; // ここで指定されたURLをポップアップにロード
        }
      }, 100); // 少し遅延させることで、ウィンドウのブロックを避けることができる場合があります

      // ボタンを非表示にして、Pyxelゲームを表示
      document.getElementById("startButton").style.display = 'none';
      document.getElementById("pyxelGame").style.display = 'block'; // Pyxelゲームを表示
    }
  </script>
</head>
<body>
  <!-- ボタンを配置 -->
  <button id="startButton" onclick="openPopupAndLoadPage()">Start Game</button>

  <!-- Pyxelゲームを埋め込む部分（最初は非表示） -->
  <div id="pyxelGame" style="display: none;">
    <script src="https://cdn.jsdelivr.net/gh/kitao/pyxel/wasm/pyxel.js"></script>
    <pyxel-play root="https://rsakamot-star.github.io/testPython" name="main.pyxapp"></pyxel-play>
  </div>
</body>
</html>
